import{a as t,f as e,b as s,r as a,h as i,g as n,m,j as l,i as u,e as d,t as p,l as c,V as r,s as o,w as x,n as y}from"./index-zpwK8d8O.js";import{b as f}from"./bj-DxnKGUAu.js";import{b}from"./bj-mobile-DKykvDMt.js";import{t as v}from"./time-ZcEKuHIx.js";import{C as h}from"./countdown-D7bIdwHV.js";import{g as w,U as j}from"./USDTToken-CuhSVihG.js";const N="/assets/img-D5glm7d4.png",g={address:"0x83082899d1719A012B63D522f0B6509F8035735c",abi:[{type:"constructor",stateMutability:"nonpayable",inputs:[]},{name:"AddUser",type:"event",inputs:[{type:"address",name:"user",indexed:!0},{type:"uint256",name:"cycle"}]},{name:"Claim",type:"event",inputs:[{type:"address",name:"user",indexed:!0},{type:"uint256",name:"amount"},{type:"uint256",name:"cycle"}]},{name:"Initialized",type:"event",inputs:[{type:"uint8",name:"version"}]},{name:"currentCycle",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"cycleUserCountOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"hasRole",type:"function",stateMutability:"view",inputs:[{type:"bytes32",name:"role"},{type:"address",name:"account"}],outputs:[{type:"bool"}]},{name:"lastDistributeAt",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"perUserRewardOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"reserve",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"usdt",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"userCyclesOf",type:"function",stateMutability:"view",inputs:[{type:"address"},{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"userLastIndexOf",type:"function",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{name:"initialize",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_permissionAdmin"},{type:"address",name:"_usdt"}],outputs:[]},{name:"isInCycle",type:"function",stateMutability:"view",inputs:[{type:"address",name:"_user"},{type:"uint256",name:"_cycle"}],outputs:[{type:"bool"}]},{name:"addUser",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_user"}],outputs:[]},{name:"startDistribute",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]},{name:"distribute",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]},{name:"earm",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"claim",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]}]},M=()=>{const{t:M}=t(),{showToast:C}=e(),{address:S}=s(),[U,D]=a.useState(!1),[F,A]=a.useState(),[O,B]=a.useState(),[I,T]=a.useState(),[_,k]=a.useState(!1),[q,z]=a.useState(!1),[R,E]=a.useState(),[G,L]=a.useState(!1);a.useEffect((()=>{V()}),[S]);const V=async()=>{if(!S)return;const t=(await w(c)).timestamp,[e,s,a]=await i(c,{contracts:[{abi:j.abi,address:r,functionName:"balanceOf",args:[g.address]},{...g,functionName:"lastDistributeAt"},{...g,functionName:"reserve"}]}).then((t=>t.map((t=>"success"==t.status?t.result:void 0))));if(null!=e&&null!=a){A(e);const t=Number(n(e-a))/2;T(t)}if(null!=s)if(s==BigInt(0))k(!1);else{k(!0);const e=s+BigInt(86400);if(e>t){E(Number(e-t)),z(!1)}else z(!0)}const l=await m(c,{...g,functionName:"earm",account:S});B(l)};return l.jsxs("div",{className:"relative mb-[100px] h-[100vh] md:h-full",children:[u()&&l.jsx("img",{src:f}),!u()&&l.jsx("img",{src:b,className:"mt-[-50px] h-[360px]"}),!u()&&l.jsx("img",{src:N,className:"top-0 absolute ml-[-80px] w-[400px]"}),l.jsx("div",{className:"top-[200px] md:top-[100px] right-0 left-0 absolute",children:l.jsx("div",{className:"container-1200",children:l.jsxs("div",{className:"flex items-start",children:[l.jsxs("div",{className:"flex-none border-[#00A899] bg-white p-6 md:p-[2.5vw] border rounded-[16px] w-full md:w-[43.3vw]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-[24px]",children:[l.jsxs("div",{className:"font-bold text-[20px] lg:text-[32px]",children:[l.jsx("span",{className:"mainColor",children:"FOMOÂ·"}),M("fomo.text1")]}),_?q?l.jsx(d,{loading:G,onClick:async()=>{const t=await m(c,{...g,functionName:"currentCycle"});if(await m(c,{...g,functionName:"cycleUserCountOf",args:[t]})==BigInt("0"))return C(M("treasury.Nowinning"),"error");try{L(!0);const{request:t}=await o(c,{...g,functionName:"distribute"}),e=await x(c,t);await y(c,{hash:e}),C(M("tips.updateSuccessful"),"success"),V()}catch(e){}finally{L(!1)}},variant:"blueGradientBorder",className:"md:w-[140px] md:h-[44px]",children:M("fomo.text2")}):l.jsxs("div",{className:"flex justify-center items-center border-[#dcdcdc] border rounded-[60px] w-[130px] md:w-[140px] h-[37px] md:h-[44px] mainColor",children:[l.jsx("img",{src:v,className:"mr-[5px] md:mr-[10px] w-[20px] md:w-[24px]"}),null!=R&&l.jsx(h,{seconds:R,onComplete:()=>z(!0),className:"font-medium !text-[#00A899] text-[14px] md:text-[16px]"})]}):l.jsx(l.Fragment,{})]}),l.jsxs("div",{className:"gap-x-4 gap-y-[10px] grid grid-cols-1 md:grid-cols-2",children:[l.jsxs("div",{className:"bg-[#F6F6F6] px-6 py-[18px] md:py-[36px] rounded-[20px] text-center md:text-left",children:[l.jsx("div",{className:"text-[16px] md:text-[24px]",children:M("fomo.text4")}),l.jsxs("div",{className:"flex flex-row md:flex-col justify-center items-center md:items-start",children:[l.jsx("div",{className:"font-bold text-[24px] md:text-[36px] mainColor",children:null!=I&&p(I)}),l.jsx("div",{className:"ml-2 md:ml-0 text-[12px] md:text-[16px]",children:"USDT"})]})]}),l.jsxs("div",{className:"bg-[#F6F6F6] px-6 py-[18px] md:py-[36px] rounded-[20px] text-center md:text-left",children:[l.jsx("div",{className:"text-[16px] md:text-[24px]",children:M("fomo.text3")}),l.jsxs("div",{className:"flex flex-row md:flex-col justify-center items-center md:items-start",children:[l.jsx("div",{className:"font-bold text-[24px] md:text-[36px] mainColor",children:null!=F&&p(n(F))}),l.jsx("div",{className:"ml-2 md:ml-0 text-[12px] md:text-[16px]",children:"USDT"})]})]})]}),l.jsxs("div",{className:"flex md:flex-row flex-col justify-between items-center bg-[#00A899] mt-4 md:px-[48px] md:py-[32px] p-6 rounded-[16px] text-center md:text-left",children:[l.jsxs("div",{className:"mb-4 md:mb-0 text-white",children:[l.jsx("div",{className:"text-[17px] md:text-[26px]",children:M("fomo.text5")}),l.jsxs("div",{className:"flex flex-row md:flex-col items-center md:items-start",children:[l.jsx("div",{className:"text-[32px] md:text-[50px]",children:null!=O&&p(n(O))}),l.jsx("div",{className:"ml-2 md:ml-0 text-[15px] md:text-[24px]",children:"USDT"})]})]}),l.jsx(d,{disabled:null==O||0==Number(p(n(O))),loading:U,onClick:async()=>{try{D(!0);const{request:t}=await o(c,{...g,functionName:"claim"}),e=await x(c,t);await y(c,{hash:e}),C(M("tips.claimSuccess"),"success"),V()}catch(t){}finally{D(!1)}},variant:"bgWhite",className:"w-full md:w-[232px] h-[46px] md:h-[80px] md:!text-[24px]",children:M("claim")})]})]}),u()&&l.jsx("img",{src:N,className:"md:mt-[-5vw] md:ml-[-10vw] md:w-[50vw]"})]})})})]})};export{M as default};
