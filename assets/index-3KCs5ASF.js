import{M as e,y as t,C as s,D as a,E as n,G as i,H as l,l as r,a as m,d as c,b as d,J as o,r as p,h as x,g as u,m as y,j as f,i as b,f as h,t as v,e as j,q as w,V as N,s as g,w as C,n as B}from"./index-BYJmTDjo.js";import{b as M}from"./bj-DxnKGUAu.js";import{b as S}from"./bj-mobile-DKykvDMt.js";import{t as D}from"./time-ZcEKuHIx.js";import{C as U}from"./countdown-YZIxPoCa.js";import{g as A,U as I}from"./USDTToken-DZlE3O38.js";import{n as F}from"./noTeam-BTYkU0ZR.js";import{C as k}from"./chevron-right-hBdaTnm1.js";import{L as _}from"./loader-DDPoe7RA.js";
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),O="/assets/img-D5glm7d4.png",q={address:"0x83082899d1719A012B63D522f0B6509F8035735c",abi:[{type:"constructor",stateMutability:"nonpayable",inputs:[]},{name:"AddUser",type:"event",inputs:[{type:"address",name:"user",indexed:!0},{type:"uint256",name:"cycle"}]},{name:"Claim",type:"event",inputs:[{type:"address",name:"user",indexed:!0},{type:"uint256",name:"amount"},{type:"uint256",name:"cycle"}]},{name:"Initialized",type:"event",inputs:[{type:"uint8",name:"version"}]},{name:"currentCycle",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"cycleUserCountOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"hasRole",type:"function",stateMutability:"view",inputs:[{type:"bytes32",name:"role"},{type:"address",name:"account"}],outputs:[{type:"bool"}]},{name:"lastDistributeAt",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"perUserRewardOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"reserve",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"usdt",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"userCyclesOf",type:"function",stateMutability:"view",inputs:[{type:"address"},{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"userLastIndexOf",type:"function",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{name:"initialize",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_permissionAdmin"},{type:"address",name:"_usdt"}],outputs:[]},{name:"isInCycle",type:"function",stateMutability:"view",inputs:[{type:"address",name:"_user"},{type:"uint256",name:"_cycle"}],outputs:[{type:"bool"}]},{name:"addUser",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_user"}],outputs:[]},{name:"startDistribute",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]},{name:"distribute",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]},{name:"earm",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"claim",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]}]},T=()=>{const{t:e}=m(),{showToast:T}=c(),{address:z}=d(),L=o(),[G,K]=p.useState(!1),[R,W]=p.useState(),[H,J]=p.useState(),[Q,V]=p.useState(),[P,X]=p.useState(!1),[Y,Z]=p.useState(!1),[$,ee]=p.useState(),[te,se]=p.useState(!1),[ae,ne]=p.useState(),[ie,le]=p.useState(),[re,me]=p.useState(),[ce,de]=p.useState();p.useEffect((()=>{oe()}),[z]);const oe=async()=>{if(!z)return;const e=(await A(r)).timestamp,[t,s,a,n]=await x(r,{contracts:[{abi:I.abi,address:N,functionName:"balanceOf",args:[q.address]},{...q,functionName:"lastDistributeAt"},{...q,functionName:"reserve"},{...q,functionName:"currentCycle"}]}).then((e=>e.map((e=>"success"==e.status?e.result:void 0))));if(null!=t&&null!=a){W(t);const e=Number(u(t-a))/2;V(e)}if(null!=s)if(s==BigInt(0))X(!1);else{X(!0);const t=s+BigInt(86400);if(t>e){ee(Number(t-e)),Z(!1)}else Z(!0)}null!=n&&(pe(n),le(n),ne(n));const i=await y(r,{...q,functionName:"earm",account:z});J(i)},pe=async e=>{const m=await(async(e,m)=>{var c,d,o,p;const x=t(r),u=56==x?{Authorization:"Bearer ".concat(i[x])}:void 0,y=s(null==m?void 0:m.where),f=a("query fomoUsers {\n    fomoUsers(\n          first: ".concat(null!=(c=null==m?void 0:m.first)?c:1e3,"\n          skip:").concat(null!=(d=null==m?void 0:m.skip)?d:0,"\n          orderBy:").concat(null!=(o=null==m?void 0:m.orderBy)?o:"createAt","\n          orderDirection:desc\n          ").concat(y,"\n        ) {\n         user\n    cycle\n    createAt\n        }\n      }")),{fomoUsers:b}=await e.fetchQuery({queryKey:[null!=(p=null==m?void 0:m.queryKey)?p:"fomoUsers"],queryFn:async()=>n(l[x],f,void 0,u)});return b})(L,{where:{cycle:Number(e)}});de(m.length),me(m)};return f.jsxs("div",{className:"relative mb-[100px] md:h-full",children:[b()&&f.jsx("img",{src:M}),!b()&&f.jsx("img",{src:S,className:"mt-[-50px] h-[360px]"}),!b()&&f.jsx("img",{src:O,className:"top-0 absolute ml-[-80px] w-[400px]"}),f.jsx("div",{className:"md:top-[100px] right-0 left-0 md:absolute mt-[-160px] md:mt-0",children:f.jsx("div",{className:"container-1200",children:f.jsxs("div",{className:"relative flex md:flex-row flex-col items-start",children:[f.jsxs("div",{className:"flex-none border-[#00A899] bg-white md:mr-5 mb-4 p-6 md:p-[2.5vw] border rounded-[16px] w-full md:w-[43.3vw]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-[24px]",children:[f.jsxs("div",{className:"font-bold text-[20px] lg:text-[32px]",children:[f.jsx("span",{className:"mainColor",children:"FOMO·"}),e("fomo.text1")]}),P?Y?f.jsx(h,{loading:te,onClick:async()=>{const t=await y(r,{...q,functionName:"currentCycle"});if(await y(r,{...q,functionName:"cycleUserCountOf",args:[t]})==BigInt("0"))return T(e("treasury.Nowinning"),"error");try{se(!0);const{request:t}=await g(r,{...q,functionName:"distribute"}),s=await C(r,t);await B(r,{hash:s}),T(e("tips.updateSuccessful"),"success"),oe()}catch(s){}finally{se(!1)}},variant:"blueGradientBorder",className:"md:w-[140px] md:h-[44px]",children:e("fomo.text2")}):f.jsxs("div",{className:"flex justify-center items-center border-[#dcdcdc] border rounded-[60px] w-[130px] md:w-[140px] h-[37px] md:h-[44px] mainColor",children:[f.jsx("img",{src:D,className:"mr-[5px] md:mr-[10px] w-[20px] md:w-[24px]"}),null!=$&&f.jsx(U,{seconds:$,onComplete:()=>Z(!0),className:"font-medium !text-[#00A899] text-[14px] md:text-[16px]"})]}):f.jsx(f.Fragment,{})]}),f.jsxs("div",{className:"gap-x-4 gap-y-[10px] grid grid-cols-1 md:grid-cols-2",children:[f.jsxs("div",{className:"bg-[#F6F6F6] px-6 py-[18px] md:py-[36px] rounded-[20px] text-center md:text-left",children:[f.jsx("div",{className:"text-[16px] md:text-[24px]",children:e("fomo.text4")}),f.jsxs("div",{className:"flex flex-row md:flex-col justify-center items-center md:items-start",children:[f.jsx("div",{className:"font-bold text-[24px] md:text-[36px] mainColor",children:null!=Q&&v(Q)}),f.jsx("div",{className:"ml-2 md:ml-0 text-[12px] md:text-[16px]",children:"USDT"})]})]}),f.jsxs("div",{className:"bg-[#F6F6F6] px-6 py-[18px] md:py-[36px] rounded-[20px] text-center md:text-left",children:[f.jsx("div",{className:"text-[16px] md:text-[24px]",children:e("fomo.text3")}),f.jsxs("div",{className:"flex flex-row md:flex-col justify-center items-center md:items-start",children:[f.jsx("div",{className:"font-bold text-[24px] md:text-[36px] mainColor",children:null!=R&&v(u(R))}),f.jsx("div",{className:"ml-2 md:ml-0 text-[12px] md:text-[16px]",children:"USDT"})]})]})]}),f.jsxs("div",{className:"flex md:flex-row flex-col justify-between items-center bg-[#00A899] mt-4 md:px-[48px] md:py-[32px] p-6 rounded-[16px] text-center md:text-left",children:[f.jsxs("div",{className:"mb-4 md:mb-0 text-white",children:[f.jsx("div",{className:"text-[17px] md:text-[26px]",children:e("fomo.text5")}),f.jsxs("div",{className:"flex flex-row md:flex-col items-center md:items-start",children:[f.jsx("div",{className:"text-[32px] md:text-[50px]",children:null!=H&&v(u(H))}),f.jsx("div",{className:"ml-2 md:ml-0 text-[15px] md:text-[24px]",children:"USDT"})]})]}),f.jsx(h,{disabled:null==H||0==Number(v(u(H))),loading:G,onClick:async()=>{try{K(!0);const{request:t}=await g(r,{...q,functionName:"claim"}),s=await C(r,t);await B(r,{hash:s}),T(e("tips.claimSuccess"),"success"),oe()}catch(t){}finally{K(!1)}},variant:"bgWhite",className:"w-full md:w-[232px] h-[46px] md:h-[80px] md:!text-[24px]",children:e("claim")})]})]}),f.jsxs("div",{className:"relative z-[2] flex-none border-[#00A899] bg-white p-6 md:p-[2.5vw] border rounded-[16px] w-full md:w-[40vw]",children:[f.jsxs("div",{className:"font-bold text-[20px] lg:text-[32px]",children:[e("fomo.text7"),"：",f.jsx("span",{className:"mainColor",children:ce})]}),f.jsxs("div",{className:"flex justify-center items-center my-5 cursor-pointer",children:[f.jsx(E,{onClick:()=>{null!=ie&&ie!=BigInt(0)&&(le(ie-BigInt(1)),pe(ie-BigInt(1)))},className:"\n                            ".concat(null==ie||ie==BigInt("0")?"grayscale opacity-30 cursor-not-allowed":"grayscale-0 opacity-100 hover:scale-105","\n                          ")}),f.jsx("div",{className:j("mx-[10px] text-[14px] md:text-[20px]"),children:null!=ie&&e("fomo.text6",{period:Number(ie)+1})}),f.jsx(k,{onClick:()=>{null!=ie&&ie!=ae&&(le(ie+BigInt(1)),pe(ie+BigInt(1)))},className:"\n                            ".concat(null==ie||ie==ae?"grayscale opacity-30 cursor-not-allowed":"grayscale-0 opacity-100 hover:scale-105","\n                          ")})]}),f.jsxs("div",{className:"border-[#D0D5DD] mt-[20px] lg:mt-[35px] pt-5 border rounded-[20px] md:h-[350px] min-h-[200px]",children:[f.jsxs("div",{className:"border-[#EEE] grid grid-cols-[1fr_2fr] mb-3 px-[15px] lg:px-[56px] p-[0_16px_10px] border-b font-medium text-[#B5B7C0] text-[14px] lg:text-[24px]",children:[f.jsx("div",{children:e("team.text9")}),f.jsx("div",{className:"text-center",children:e("team.text10")})]}),f.jsx("div",{className:"max-h-[600px] md:max-h-[260px] overflow-auto",children:null!=re?re.length>0?re.map(((e,t)=>f.jsxs("div",{className:"items-center border-[#EEE] grid grid-cols-[1fr_2fr] mx-[15px] lg:px-[56px] py-[15px] lg:py-[15px] border-b font-medium text-[#292D32] text-[14px] lg:text-[24px] ]",children:[f.jsx("div",{children:t+1}),f.jsx("div",{className:"text-center",children:w(e.user)})]},t))):f.jsxs("div",{className:"pt-[50px] md:pt-[300px] pb-[50px] md:pb-0 text-center",children:[f.jsx("img",{src:F,className:"m-auto w-[150px] md:w-[300px]"}),f.jsx("div",{className:"mt-[10px] text-[#B5B7C0] text-[14px] md:text-[30px]",children:e("fomo.NoWin")})]}):f.jsx(_,{className:"m-auto mt-[50px] lg:mt-[90px] w-[30px] animate-spin",color:"#6b7280"})})]})]}),b()&&f.jsx("img",{src:O,className:"right-0 z-[1] absolute md:mt-[-5vw] md:ml-[-10vw] md:w-[38vw]"})]})})})]})};export{T as default};
