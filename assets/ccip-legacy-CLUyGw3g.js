System.register(["./index-legacy-B7T473l9.js"],(function(e,a){"use strict";var t,s,r,n,o,c,d,u,i,l,f;return{setters:[e=>{t=e.a2,s=e.a3,r=e.$,n=e.a4,o=e.a5,c=e.a6,d=e.a7,u=e.a8,i=e.a9,l=e.aa,f=e.ab}],execute:function(){function a(e,a){if(!t(e,{strict:!1}))throw new s({address:e});if(!t(a,{strict:!1}))throw new s({address:a});return e.toLowerCase()===a.toLowerCase()}e({ccipRequest:w,offchainLookup:async function(e,{blockNumber:t,blockTag:s,data:r,to:n}){const{args:o}=c({data:r,abi:[m]}),[l,f,h,b,g]=o,{ccipRead:k}=e,x=k&&"function"==typeof k?.request?k.request:w;try{if(!a(n,l))throw new y({sender:l,to:n});const r=await x({data:h,sender:l,urls:f}),{data:o}=await d(e,{blockNumber:t,blockTag:s,data:u([b,i([{type:"bytes"},{type:"bytes"}],[r,g])]),to:n});return o}catch(e){throw new p({callbackSelector:b,cause:e,data:r,extraData:g,sender:l,urls:f})}}});class p extends r{constructor({callbackSelector:e,cause:a,data:t,extraData:s,sender:r,urls:o}){super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],a.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map((e=>`    ${n(e)}`))],`  Sender: ${r}`,`  Data: ${t}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class h extends r{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${n(a)}`,`Response: ${o(e)}`],name:"OffchainLookupResponseMalformedError"})}}class y extends r{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${a}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}e("offchainLookupSignature","0x556f1830");const m=e("offchainLookupAbiItem",{name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]});async function w({data:e,sender:a,urls:t}){let s=new Error("An unknown error occurred.");for(let r=0;r<t.length;r++){const n=t[r],c=n.includes("{data}")?"GET":"POST",d="POST"===c?{data:e,sender:a}:void 0,u="POST"===c?{"Content-Type":"application/json"}:{};try{const t=await fetch(n.replace("{sender}",a.toLowerCase()).replace("{data}",e),{body:JSON.stringify(d),headers:u,method:c});let r;if(r=t.headers.get("Content-Type")?.startsWith("application/json")?(await t.json()).data:await t.text(),!t.ok){s=new l({body:d,details:r?.error?o(r.error):t.statusText,headers:t.headers,status:t.status,url:n});continue}if(!f(r)){s=new h({result:r,url:n});continue}return r}catch(e){s=new l({body:d,details:e.message,url:n})}}throw s}}}}));
